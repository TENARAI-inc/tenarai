データ取得・送信と型

# CSS とレスポンシブ

CSS（Cascading Style Sheets） はブラウザのレンダリングやペイントに影響を与える技術であり

- アイテムをどのように描画するのか
- アイテムをどのように配置するのか
- アイテムを表示させないようにする
- アニメーションを適用する

などの機能を提供する。

## CSS と設計方針

CSS がないと HTML は単なるドキュメントなので定義されたドキュメントとしての文字列をブラウザはただ出力するだけとなる。  
簡単に言うと、テキストエディタで書いたテキストが出ているだけのような状態になる。  
（HTML タグは解釈されるので見た目には出現しない）

一応タイトルタグ等への、ブラウザデフォルトの装飾があるためタイトルは大きく太字になっていたりはするが、これはブラウザ判断なのでブラウザごとに多少かわった見た目になる。

::: info
このようなブラウザ固有のデフォルトの値をぜんぶリセットして異なるブラウザの見え方を統一させるための初期化処理として"リセット CSS"というものが存在する。  
これもいろんな人がつくっているのでどのようにリセットしているか見てみるとよい。
:::

### CSS（Cascading Style Sheets）

HTML という情報に装飾を加え、情報を見やすくみせるための不可欠な道具が `CSS`。  
これらの見た目の操作が可能なのは CSS という共通ルールが共有されていて、かつブラウザがそのルールを正確な解釈で再現しているためである。

つまりブラウザが解釈を変えていたり、特定の CSS ルールを採用しない場合意図通りの結果にならない場合がある。

::: info
腐った牛乳問題

世界的にかなりのシェアをしめていたブラウザがかつて存在した。  
これはマイクロソフトという企業が開発したブラウザだったが、CSS の解釈にはウェブ標準からかなり乖離があった。  
ウェブ標準とはウェブ関連の様々なふるまいを統一するための世界共通の標準化されたルールであり、CSS の表示、機能の定義もその一つである。  
ルールは決まっているのだが「しかし皆がつかっているのはこの IE なのだ」という奢りから独自の解釈で CSS を解釈し、IE とそれ以外のブラウザで表示が異なっている状況を作り出した戦犯ともいえる存在。

これにより多くのウェブ開発者は CSS のデザイン再現においてかなりの苦労を強いられたし、ウェブの標準化に対してかなりの悪影響を与えた。
結果としてマイクロソフト自体が「Internet Explorer（IE）6 を使うのは、腐った牛乳を飲むようなものだ」と自ら IE を使うのをやめるよう呼びかけた。

:::

今の時代、ブラウザが標準を無視して勝手に解釈したレンダリングをすればユーザーは離れてしまうため、各ブラウザはこぞって業界が決めたウェブ標準ルールを正確に再現している。

### CSS の指定サンプル

タグ名やクラスによる指定等、いろいろな方法で対象を指定して見た目の指示を行う。  
このルールを設定する項目をセレクタと呼ぶ。

```css
/* h1タグに対する指示。h1セレクタ */
h1 {
  font-size: 32px;
  color: blue;
}

/**
 * Itemクラスの中にある、Linkクラスを持つaタグに対して下線を指定 
 *
 * <div class="Item">
 *  <a class="Link">ひらく</a>
 * </div>
 */
.Item a.Link {
  text-decoration: underline;
}

/**
 * ulタグ内のliタグ内にある、target属性を持つimgタグに対してかどまるを指定
 *
 * <ul>
 *  <li>
 *    <a src="***">リンク</a>
 *  </li>
 *  <li>
 *    <a src="***" target="_blank">リンク</a> //これに対してのみ適用
 *  </li>
 *  <li>
 *    <a src="***">リンク</a>
 *  </li>
 * </ul>
*/
ul li a[target] {
  border-radius: 6px;
}

/*  */

/**
 * altの中身がdogであるimgタグに対して1pxのボーダーを指定
 *
 * <ul>
 *  <li>
 *    <img src="***" alt="cat" />
 *    <img src="***" alt="dog" /> //これに対してのみ適用
 *    <img src="***" alt="pig" />
 *  <li>
 * </ul>
*/
img[alt='dog'] {
  border: solid 1px black;
}
```

### ウェブ標準の更新とブラウザの機能追加

今現在も新しいルールはどんどん検討・採択されたのちにブラウザがそれを実装することでブラウザの機能自体も増えていく。

昔は動画やアニメーションは簡単ではなかったために Flash 等のブラウザのプラグインというものを利用してそれを補っていた。  
そこから動画の扱い等がウェブ標準に組み込まれたことで現在ではブラウザオリジナルの機能として提供されている。

こうしてメジャーなブラウザならばほぼ同様のページが見える世界になっている。

## CSS カスタムプロパティ（CSS プロパティ）

CSS にも定数と同様の働きをするプロパティを扱う機能が存在する。  
これは大変便利なため、積極的につかうべきである。  
たとえばサイトのテーマカラーやリンクの色等、統一されるべき要素についてはすべて同一のプロパティを参照するようにしておけば一貫性が保証される。  
さらに画期的なのはこの宣言したプロパティをセレクタ内部で上書きが可能だということである。

```css
:root {
  --site-color: #16f;
  --some-img-border-radius: 4px;
}

html {
  /**
   * htmlタグ以下の（つまりページ全体）の基本のテキストカラーを指定する
   * 上書きされない限りテキストはこの色となる
   */
  color: var(--site-color);
}

.MyImg {
  /* CSSプロパティはvar関数といっしょに使用する */
  border-radius: var(--some-img-border-radius);
}

.SpecificItem {
  /**
   * このセレクタ内では、常に--site-colorの値はyellowになる
   * SpecificItemの内部のhtmlにはすべてこの上書きされた--site-colorの値が適用されることになる
   * つまりSpecificItemの内部も-site-colorプロパティを参照しているために、その参照をyellowで上書きしているのだから
   + 結果としてSpecificItem内部のテキストはすべてyelloとなる
   * 
   */
  --site-color: yellow;
}
```

このように一度 CSS プロパティを参照させておき、適宜上書きすることで何度も同様のルールを個別のセレクタに適用しなくてすむように設計が可能になる。  
これはレスポンシブな CSS 適用（後述）においてかなり効果を発揮する。

## メディアクエリによるレスポンシブ対応

ブラウザとは言っても世の中いろいろなデバイスでブラウザが動いている。  
パソコンで見たとしても、個人ごとにブラウザのウィンドウサイズも変わってくる。

CSS は見た目担当なのでブラウザサイズによる見た目の調整も担当する。  
一般にこのブラウザの幅により表示されているエリアをビューポートと呼ぶ。  
このビューポートのサイズごとに CSS の指示を変えることでさまざまな（サイズ、つまりビューポートの違う）デバイスでもコンテンツをうまく表示させることが可能になる。

```css
/* 通常、Containerクラスのテキストカラーは緑である */
.Container {
  color: green;
}

/* ビューポートのサイズが768px以下の場合は以下のルールを適用する */
@media screen and (width <= 768px) {
  /* Containerクラスのテキストカラーは赤とする */
  .Container {
    color: red;
  }
}
```

これらのほか js 側から CSS プロパティを変更することによりダイナミックな表現が可能になる。  
CSS プロパティのおかげで js はセレクタ等の考慮をほぼすることなしに CSS に命令を送ることができる。  
このように便利な CSS プロパティはどんどん利用してサイトの統一やシンプルなコードを保っていきたい。
